import{k as W,m as ie,d as U,n as re,p as G,q as de,t as z,v as ue,o as A,c as j,e as L,x as S,y as w,u as e,z as ce,b as s,w as r,A as K,B as fe,C as X,D as Z,G as ee,H as oe,I as me,J as pe,K as ye,U as le,L as ge,M as ve,N as J,a as h,O as Ce,P as be,Q as _e,R as Y,S as ke,j as ae,T as Te,V as Ee,W as H,X as he,Y as Ne,Z as Q,$ as we,a0 as Be,a1 as De,a2 as Ie,a3 as $e,a4 as Fe,a5 as Ae,a6 as Se,a7 as Me,a8 as Pe,a9 as Re,aa as ze,r as x,F as Oe,g as q,ab as Ve,ac as Le,ad as Ue,E as qe,i as je}from"./index-97ca1030.js";import{E as xe,a as Ke,d as Ze}from"./el-table-column-a3bbcf76.js";import"./el-checkbox-a305ced3.js";import{E as Ge,a as Je}from"./axios-5e479414.js";import{a as Ye,b as He,c as Qe,u as We}from"./index-fe9900d0.js";import{E as R}from"./index-2c2ad003.js";const te=Symbol("dialogInjectionKey"),se=W({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ie},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Xe={close:()=>!0},eo=["aria-label"],oo=["id"],lo=U({name:"ElDialogContent"}),ao=U({...lo,props:se,emits:Xe,setup(a){const c=a,{t:k}=re(),{Close:i}=me,{dialogRef:p,headerRef:T,bodyId:y,ns:d,style:t}=G(te),{focusTrapRef:C}=G(de),g=pe(C,p),E=z(()=>c.draggable);return ue(p,T,E),(l,o)=>(A(),j("div",{ref:e(g),class:w([e(d).b(),e(d).is("fullscreen",l.fullscreen),e(d).is("draggable",e(E)),e(d).is("align-center",l.alignCenter),{[e(d).m("center")]:l.center},l.customClass]),style:ee(e(t)),tabindex:"-1"},[L("header",{ref_key:"headerRef",ref:T,class:w(e(d).e("header"))},[S(l.$slots,"header",{},()=>[L("span",{role:"heading",class:w(e(d).e("title"))},ce(l.title),3)]),l.showClose?(A(),j("button",{key:0,"aria-label":e(k)("el.dialog.close"),class:w(e(d).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=f=>l.$emit("close"))},[s(e(X),{class:w(e(d).e("close"))},{default:r(()=>[(A(),K(fe(l.closeIcon||e(i))))]),_:1},8,["class"])],10,eo)):Z("v-if",!0)],2),L("div",{id:e(y),class:w(e(d).e("body"))},[S(l.$slots,"default")],10,oo),l.$slots.footer?(A(),j("footer",{key:0,class:w(e(d).e("footer"))},[S(l.$slots,"footer")],2)):Z("v-if",!0)],6))}});var to=oe(ao,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const so=W({...se,appendToBody:{type:Boolean,default:!1},beforeClose:{type:ye(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),no={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[le]:a=>ge(a),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},io=(a,c)=>{const i=Te().emit,{nextZIndex:p}=ve();let T="";const y=J(),d=J(),t=h(!1),C=h(!1),g=h(!1),E=h(a.zIndex||p());let l,o;const f=Ce("namespace",Ee),m=z(()=>{const v={},F=`--${f.value}-dialog`;return a.fullscreen||(a.top&&(v[`${F}-margin-top`]=a.top),a.width&&(v[`${F}-width`]=be(a.width))),v}),b=z(()=>a.alignCenter?{display:"flex"}:{});function O(){i("opened")}function B(){i("closed"),i(le,!1),a.destroyOnClose&&(g.value=!1)}function M(){i("close")}function P(){o==null||o(),l==null||l(),a.openDelay&&a.openDelay>0?{stop:l}=H(()=>_(),a.openDelay):_()}function D(){l==null||l(),o==null||o(),a.closeDelay&&a.closeDelay>0?{stop:o}=H(()=>V(),a.closeDelay):V()}function I(){function v(F){F||(C.value=!0,t.value=!1)}a.beforeClose?a.beforeClose(v):D()}function u(){a.closeOnClickModal&&I()}function _(){he&&(t.value=!0)}function V(){t.value=!1}function n(){i("openAutoFocus")}function N(){i("closeAutoFocus")}function $(v){var F;((F=v.detail)==null?void 0:F.focusReason)==="pointer"&&v.preventDefault()}a.lockScroll&&_e(t);function ne(){a.closeOnPressEscape&&I()}return Y(()=>a.modelValue,v=>{v?(C.value=!1,P(),g.value=!0,E.value=a.zIndex?E.value++:p(),ke(()=>{i("open"),c.value&&(c.value.scrollTop=0)})):t.value&&D()}),Y(()=>a.fullscreen,v=>{c.value&&(v?(T=c.value.style.transform,c.value.style.transform=""):c.value.style.transform=T)}),ae(()=>{a.modelValue&&(t.value=!0,g.value=!0,P())}),{afterEnter:O,afterLeave:B,beforeLeave:M,handleClose:I,onModalClick:u,close:D,doClose:V,onOpenAutoFocus:n,onCloseAutoFocus:N,onCloseRequested:ne,onFocusoutPrevented:$,titleId:y,bodyId:d,closed:C,style:m,overlayDialogStyle:b,rendered:g,visible:t,zIndex:E}},ro=["aria-label","aria-labelledby","aria-describedby"],uo=U({name:"ElDialog",inheritAttrs:!1}),co=U({...uo,props:so,emits:no,setup(a,{expose:c}){const k=a,i=Ne();Q({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},z(()=>!!i.title)),Q({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},z(()=>!!k.customClass));const p=we("dialog"),T=h(),y=h(),d=h(),{visible:t,titleId:C,bodyId:g,style:E,overlayDialogStyle:l,rendered:o,zIndex:f,afterEnter:m,afterLeave:b,beforeLeave:O,handleClose:B,onModalClick:M,onOpenAutoFocus:P,onCloseAutoFocus:D,onCloseRequested:I,onFocusoutPrevented:u}=io(k,T);Be(te,{dialogRef:T,headerRef:y,bodyId:g,ns:p,rendered:o,style:E});const _=Re(M),V=z(()=>k.draggable&&!k.fullscreen);return c({visible:t,dialogContentRef:d}),(n,N)=>(A(),K(Pe,{to:"body",disabled:!n.appendToBody},[s(Me,{name:"dialog-fade",onAfterEnter:e(m),onAfterLeave:e(b),onBeforeLeave:e(O),persisted:""},{default:r(()=>[De(s(e(Ie),{"custom-mask-event":"",mask:n.modal,"overlay-class":n.modalClass,"z-index":e(f)},{default:r(()=>[L("div",{role:"dialog","aria-modal":"true","aria-label":n.title||void 0,"aria-labelledby":n.title?void 0:e(C),"aria-describedby":e(g),class:w(`${e(p).namespace.value}-overlay-dialog`),style:ee(e(l)),onClick:N[0]||(N[0]=(...$)=>e(_).onClick&&e(_).onClick(...$)),onMousedown:N[1]||(N[1]=(...$)=>e(_).onMousedown&&e(_).onMousedown(...$)),onMouseup:N[2]||(N[2]=(...$)=>e(_).onMouseup&&e(_).onMouseup(...$))},[s(e($e),{loop:"",trapped:e(t),"focus-start-el":"container",onFocusAfterTrapped:e(P),onFocusAfterReleased:e(D),onFocusoutPrevented:e(u),onReleaseRequested:e(I)},{default:r(()=>[e(o)?(A(),K(to,Fe({key:0,ref_key:"dialogContentRef",ref:d},n.$attrs,{"custom-class":n.customClass,center:n.center,"align-center":n.alignCenter,"close-icon":n.closeIcon,draggable:e(V),fullscreen:n.fullscreen,"show-close":n.showClose,title:n.title,onClose:e(B)}),Ae({header:r(()=>[n.$slots.title?S(n.$slots,"title",{key:1}):S(n.$slots,"header",{key:0,close:e(B),titleId:e(C),titleClass:e(p).e("title")})]),default:r(()=>[S(n.$slots,"default")]),_:2},[n.$slots.footer?{name:"footer",fn:r(()=>[S(n.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ro)]),_:3},8,["mask","overlay-class","z-index"]),[[Se,e(t)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=oe(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const mo=ze(fo);const po={class:"product-list"},ko=U({__name:"index",setup(a){const c=x({classifyName:""});let k=h([]);const i=x({pageNum:1,pageSize:5,total:0}),p=h(),T=l=>{l&&(l.resetFields(),i.pageNum=1,i.total=0,y())};ae(async()=>{y()});const y=async()=>{const{pageNum:l,pageSize:o}=i,{classifyName:f}=c,m=await Ye({pageNum:l,pageSize:o,name:f+""});k.value=m.result,i.total=m.total},d=async l=>{Ue.alert("确定要删除该分类？","删除分类",{confirmButtonText:"确定",callback:async o=>{if(o==="confirm"){const{message:f,code:m}=await He(l.id);R.closeAll(),m===0?(y(),R.success(f||"删除成功")):R.error(f||"删除失败")}}})},t=x({showModal:!1,modalType:"add",modalTitle:"",classifyName:"",id:""}),C={add:{title:"添加分类",successText:"添加成功",failedText:"添加失败",api:Qe},edit:{title:"修改分类",successText:"修改成功",failedText:"修改失败",api:We}},g=(l,o)=>{t.modalType=l,t.modalTitle=C[l].title,t.showModal=!0,t.classifyName="",t.id="",o&&(t.classifyName=o.name,t.id=o.id)},E=async l=>{const{successText:o,failedText:f,api:m}=C[l],b=await m({name:t.classifyName,id:t.id});R.closeAll(),b.code===0?(R.success(o),y(),t.showModal=!1):R.error(b.message||f)};return(l,o)=>{const f=qe,m=Je,b=je,O=Ge,B=Ze,M=X,P=xe,D=mo,I=Ke;return A(),j(Oe,null,[L("div",po,[s(O,{model:c,inline:"",ref_key:"formRef",ref:p},{default:r(()=>[s(m,{label:"商品名称",prop:"classifyName"},{default:r(()=>[s(f,{modelValue:c.classifyName,"onUpdate:modelValue":o[0]||(o[0]=u=>c.classifyName=u)},null,8,["modelValue"])]),_:1}),s(m,null,{default:r(()=>[s(b,{type:"primary",onClick:y},{default:r(()=>[q("查询")]),_:1}),s(b,{onClick:o[1]||(o[1]=u=>T(p.value))},{default:r(()=>[q("重置")]),_:1}),s(b,{type:"primary",onClick:o[2]||(o[2]=u=>g("add"))},{default:r(()=>[q("添加")]),_:1})]),_:1})]),_:1},8,["model"])]),s(P,{data:e(k),"empty-text":"无数据",border:"",style:{width:"100%"}},{default:r(()=>[s(B,{prop:"name",label:"分类名称"}),s(B,{label:"操作",width:"100"},{default:r(({row:u})=>[s(M,{onClick:_=>d(u)},{default:r(()=>[s(e(Ve))]),_:2},1032,["onClick"]),s(M,{onClick:_=>g("edit",u)},{default:r(()=>[s(e(Le))]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),s(D,{modelValue:t.showModal,"onUpdate:modelValue":o[5]||(o[5]=u=>t.showModal=u),title:t.modalTitle,center:""},{footer:r(()=>[s(b,{type:"primary",onClick:o[4]||(o[4]=u=>E(t.modalType))},{default:r(()=>[q("提交")]),_:1})]),default:r(()=>[s(f,{"model-value":t.classifyName,"onUpdate:model-value":o[3]||(o[3]=u=>t.classifyName=u)},null,8,["model-value"])]),_:1},8,["modelValue","title"]),s(I,{background:"",layout:"prev, pager, next, total",total:i.total,"page-size":i.pageSize,onCurrentChange:y,"current-page":i.pageNum,"onUpdate:current-page":o[6]||(o[6]=u=>i.pageNum=u)},null,8,["total","page-size","current-page"])],64)}}});export{ko as default};
